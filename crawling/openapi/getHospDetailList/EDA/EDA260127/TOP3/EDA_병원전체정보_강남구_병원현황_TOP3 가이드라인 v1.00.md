# TOP3 진료과목 비교 분석 가이드라인

> **문서 성격**: 본 문서는 **진료과목 간 비교 분석**을 위한 **실행 지침(Guideline)**입니다.  
> **분석 대상**: 강남구 TOP3 진료과목 (성형외과, 피부과, 내과)  
> **최종 수정**: 2026-01-27  
> **버전**: 1.00

---

## 1. 분석 개요

### 1.1 분석 목적
특정 진료과목을 **중심(메인)**으로 하여, 다른 진료과목과의 **차이점**을 비교 분석하여 **차별화 전략** 및 **경쟁 우위** 요소를 도출합니다.

### 1.2 분석 대상
- **메인 진료과목**: 분석의 중심이 되는 과목 (예: 피부과)
- **비교 진료과목**: 메인 과목과 비교할 과목들 (예: 성형외과, 내과)

### 1.3 핵심 원칙
1. **메인 과목 중심 서술**: 모든 분석 결과를 메인 과목 관점에서 해석
2. **차이점 강조**: 유사점보다 차이점에 집중
3. **실용성**: 이론적 분석보다 실행 가능한 인사이트 도출
4. **시각적 명확성**: 메인 과목을 항상 눈에 띄게 표시

---

## 2. 비교 분석 항목

### 2.1 필수 비교 항목
1. **인력 구조**: 전문의 수, 1인 의원 비율
2. **시설 규모**: 병상 보유율, 병상 수 분포
3. **지역 분포**: 행정동별 분포, 상권 유형별 분포
4. **운영 편의성**: 주말 진료율, 주차 시설 보유율

### 2.2 선택 비교 항목
5. **의료 장비**: 과목별 특화 장비 보유 패턴
6. **개원 시기**: 개원 연도 분포, 운영 기간
7. **진료 시간**: 점심시간 운영, 야간 진료
8. **좌표 분석**: 역세권 vs 비역세권 분포

---

## 3. 시각화 전략

### 3.1 색상 전략
**메인 과목을 항상 가장 눈에 띄게 표시**

```python
COLORS = {
    '메인과목': '#2E86DE',      # 파란색 (강조)
    '비교과목1': '#FF6B6B',     # 주황/빨강
    '비교과목2': '#95A5A6'      # 회색
}
```

### 3.2 시각화 유형별 가이드

#### 분포 비교 (히스토그램)
- 오버레이 방식 사용
- 메인 과목을 가장 진한 색상으로
- 범례에 N 값 표시

#### 비율 비교 (막대 그래프)
- 메인 과목을 첫 번째 위치에 배치
- 막대 위에 정확한 수치 표시
- 비율(%) 병기

#### 지역 분포 (그룹 막대 그래프)
- 메인 과목을 가장 왼쪽에 배치
- 과목별 색상 일관성 유지
- 상위 10개 지역만 표시

#### 박스플롯
- 메인 과목을 가장 왼쪽에 배치
- N 값을 레이블에 포함
- 이상치 표시

---

## 4. 리포트 구조

### 4.1 필수 섹션
1. **핵심 발견사항 (Executive Summary)**
   - 메인 과목의 독특한 특징 (3~5개)
   - 비교 과목 대비 차이점 요약
   
2. **상세 비교 분석**
   - 각 비교 항목별 분석
   - 시각화 + 표 + 인사이트
   
3. **차별화 전략**
   - 메인 과목의 차별화 포인트
   - 비교 과목 대비 강점/약점
   
4. **실행 가능한 제언**
   - 신규 개원 전략
   - 기존 병원 경쟁력 강화
   
5. **종합 분석 결과**
   - 시장 특징 요약
   - 성공/위험 요인

### 4.2 서술 원칙
- **메인 과목 중심**: "피부과는 ~이다" (O), "성형외과 대비 피부과는 ~" (O)
- **차이점 강조**: "유사하다" (X), "~한 차이가 있다" (O)
- **정량적 표현**: "많다" (X), "13%p 높다" (O)
- **실용적 제언**: "~해야 한다" (O), "~인 것으로 나타났다" (X)

---

## 5. 구현 가이드

### 5.1 데이터 필터링
```python
# TOP3 진료과목 필터링
top3_df = df[df['dgsbjt_dgsbjtCdNm'].isin(['성형외과', '피부과', '내과'])].copy()

# 메인 과목 데이터
main_df = top3_df[top3_df['dgsbjt_dgsbjtCdNm'] == '피부과']
```

### 5.2 비교 통계 계산
```python
# 과목별 통계
for dept in ['피부과', '성형외과', '내과']:
    dept_df = top3_df[top3_df['dgsbjt_dgsbjtCdNm'] == dept]
    ratio = (조건).sum() / len(dept_df) * 100
```

### 5.3 시각화 생성
```python
# 메인 과목 강조
colors = [COLORS['피부과'], COLORS['성형외과'], COLORS['내과']]
ax.bar(['피부과', '성형외과', '내과'], values, color=colors)
```

---

## 6. 체크리스트

### 분석 전
- [ ] 메인 과목 명확히 정의
- [ ] 비교 과목 선정 (2~3개 권장)
- [ ] 비교 항목 선정 (4~6개 권장)

### 분석 중
- [ ] 메인 과목 데이터 필터링 확인
- [ ] 모든 시각화에 메인 과목 강조 색상 적용
- [ ] N 값 및 비율 표시
- [ ] 차이점 정량화 (%, %p 등)

### 리포트 작성 후
- [ ] Executive Summary에 메인 과목 특징 명확히 기술
- [ ] 모든 분석을 메인 과목 관점에서 서술
- [ ] 차별화 전략 섹션 포함
- [ ] 실행 가능한 제언 포함

---

## 7. 주의사항

### 7.1 메인 과목 중심 서술
❌ **잘못된 예**: "성형외과는 병상 보유율이 1.5%이고, 피부과는 0.3%이다."  
✅ **올바른 예**: "피부과의 병상 보유율은 0.3%로, 성형외과(1.5%) 대비 1/5 수준이다."

### 7.2 차이점 강조
❌ **잘못된 예**: "피부과와 성형외과는 모두 외래 중심이다."  
✅ **올바른 예**: "피부과는 병상 보유율 0.3%로 성형외과(1.5%)보다 더 극단적인 외래 중심 구조이다."

### 7.3 정량적 표현
❌ **잘못된 예**: "피부과는 핵심 상권에 많이 분포한다."  
✅ **올바른 예**: "피부과의 91.0%가 핵심 상권에 집중되어 있다."

### 7.4 실용적 제언
❌ **잘못된 예**: "주말 진료가 중요한 것으로 나타났다."  
✅ **올바른 예**: "일요일 진료 제공 시 0.3%만 제공하는 시장에서 강력한 차별화가 가능하다."

---

## 8. 개선사항 (v1.00)

### 8.1 인코딩 이슈 해결
- **문제**: 특수 문자(•, →) 사용 시 Windows 콘솔에서 인코딩 오류
- **해결**: 특수 문자 대신 ASCII 문자 사용 (-, >, 등)
- **적용**: 모든 print 문에서 특수 문자 제거

### 8.2 시각화 개수 조정
- **계획**: 12개 시각화 생성
- **실제**: 4개 시각화 생성 (각 항목당 1~2개)
- **이유**: 핵심 비교 항목에 집중하여 명확성 향상

### 8.3 색상 전략 확립
- **메인 과목**: 파란색 (#2E86DE) - 신뢰감, 전문성
- **비교 과목1**: 주황/빨강 (#FF6B6B) - 대비 강조
- **비교 과목2**: 회색 (#95A5A6) - 중립적 배경

### 8.4 HTML 변환 시 이미지 경로 처리
- **문제**: 마크다운에서 `visualizations/` 경로가 포함된 경우 중복 경로 발생
- **해결**: `get_base64_image` 함수에서 `visualizations/` 접두사 제거 로직 추가
- **코드**:
```python
if image_name.startswith('visualizations/'):
    image_name = image_name.replace('visualizations/', '')
```
- **효과**: 상대 경로와 절대 경로 모두 지원

---

**[참고]** 본 가이드라인은 `EDA_병원전체정보_강남구_병원현황 가이드라인 v1.00.md`를 기반으로 작성되었으며, 진료과목 간 비교 분석의 특성을 반영하여 확장되었습니다.
